# Concentrated Liquidity (CL) Pool Fee Distribution

The process for claiming and distributing fees from a CL (Concentrated Liquidity) pool to the gauge voters is a multi-step pipeline.

### Step 1: Fee Generation and Accumulation

- **Fees are Generated**: Every time a user swaps tokens in a CL pool, a trading fee is charged.
- **Protocol Share**: A portion of this fee, known as the "protocol fee" (typically 5-10% of the total fee), is set aside.
- **Fees Accumulate**: These protocol fees accumulate in the CL pool, waiting to be collected.

### Step 2: Fee Collection Trigger

The fee collection process is not automatic; it needs to be triggered.
This is typically done when the `distribute()` function on the `Voter.sol` contract is called for a specific gauge.
This function can be called by anyone and is responsible for distributing the weekly YSK emissions.

As part of the `distribute()` process, the following happens:

- The `pushFees()` modifier on the `GaugeV3` contract is triggered.
- This modifier calls the `collectProtocolFees()` function on the central `FeeCollector` contract.

### Step 3: The `FeeCollector` Contract in Action

The `FeeCollector` contract acts as the intermediary that moves the fees from the pool to the distributor.

1.  **Pulls Fees from Pool**: The `FeeCollector` calls the CL pool and withdraws the accumulated protocol fees, transferring them to its own address.
2.  **Takes a Treasury Cut**: The `FeeCollector` may take a small percentage of the collected fees and send it directly to the protocol's treasury.
3.  **Forwards Fees to Distributor**: The remaining fees are then forwarded to the specific `FeeDistributor` contract that is associated with the gauge. This is done by calling the `notifyRewardAmount()` function on the `FeeDistributor`.

### Step 4: Distribution to Voters

1.  **`FeeDistributor` Receives Fees**: The `FeeDistributor` receives the fees from the `FeeCollector` and adds them to its reward pool.
2.  **Voters Claim Fees**: Users who have voted for that specific CL gauge can then claim their proportional share of the collected trading fees from the `FeeDistributor`.

### Summary of the Flow

```
Swap in CL Pool
      ↓
Fees accumulate in the pool
      ↓
distribute() is called on the Voter contract
      ↓
FeeCollector.collectProtocolFees() is triggered
      ↓
FeeCollector pulls fees from the pool
      ↓
FeeCollector sends a cut to the Treasury
      ↓
FeeCollector sends the rest to the FeeDistributor
      ↓
Voters claim their share of the fees from the FeeDistributor
```

This system ensures that the fees generated by a CL pool are efficiently collected and distributed to the users who have voted to support that pool with YSK emissions.
